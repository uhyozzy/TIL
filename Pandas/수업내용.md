# 판다스 라이브러리
> import pandas as pd


# 1장. DataFrame생성
## 1. DataFrame 생성 방법

```Python

   DataFrame 생성 방법

   1. dict 이용
     df = pd.DataFrame(dict)

   2. 중첩 리스트 이용
     df = pd.DataFrame(중첩리스트, index=[], columns=[])

   3. np.Series(리스트) 이용
      - df = pd.DataFrame([series, series,....])

      - (하나의) Series는 DataFrame으로 변경 가능
         df = series.to_frame(이름)
```

### 1) dict 이용 
```python
print("1. dict 이용한 DataFrame 생성")
df = pd.DataFrame({"col1" : [4 ,5, 6],
                   "col2" : [7, 8, 9],
                   "col3" : [10, 11, 12]})
print(df)

#
   col1  col2  col3
0     4     7    10
1     5     8    11
2     6     9    12

```

### 2) 중첩 리스트 이용한 DataFrame 생성 => ndarray도 가능
```python
print("1. 중첩 리스트 이용")
df = pd.DataFrame([[4, 7, 10],[5, 8, 11],[6, 9, 12]],
                  index=[1, 2, 3],
                  columns=['col1', 'col2', 'col3'])
print(df)

#
   col1  col2  col3
1     4     7    10
2     5     8    11
3     6     9    12
```

### 3)  Series 사용
```python
print("3. DataFrame 생성")
name =     pd.Series(["유관순","안중근"])
age =      pd.Series([18,31])
birthday = pd.Series(['1920/09/28','1910/03/26'])

hero = pd.DataFrame([name,age,birthday])
hero.columns =["hero1", "hero2"]
hero.index =["이름","나이","생일"]

print(hero)
#
         hero1       hero2
이름         유관순         안중근
나이          18          31
생일  1920/09/28  1910/03/26


print(hero.T)
#
        이름  나이          생일
hero1  유관순  18  1920/09/28
hero2  안중근  31  1910/03/26
```


## 2. DataFrame 변경 

### 1) 컬럼명 변경
```python
df.columns =[값, 값2, ... ]

예시)
df = pd.DataFrame({"col1" : [4 ,5, 6],
                   "col2" : [7, 8, 9],
                   "col3" : [10, 11, 12]})
print(df)
df.columns = ['c1', 'c2', 'c3' ]
print(df)
```

### 2) 인덱스 변경
```python
df.index = [값1, 값2, ... ]

예시)
df = pd.DataFrame({"col1" : [4 ,5, 6],
                   "col2" : [7, 8, 9],
                   "col3" : [10, 11, 12]}, index=['A','B','C'])
print(df)
df.indx = [10, 20, 30]
print(df)
```

## 3. DataFrame 속성 정보 보기

### 1) df.columns 또는 df.keys() : 컬럼정보
```python
df = pd.DataFrame({"col1" : [4 ,5, 6],
                   "col2" : [7, 8, 9],
                   "col3" : [10, 11, 12]})
                   
print(df. columns)
print(df.keys())
```

### 2) df.index : 인덱스 라벨 정보
```python
df = pd.DataFrame({"col1" : [4 ,5, 6],
                   "col2" : [7, 8, 9],
                   "col3" : [10, 11, 12]}, index=['A','B','C'])

print(df.index)
```

### 3) df.values 또는 df.to_numpy(): 값 정보
> 다차원 배열로 반환

```python
print(df.values)
print(df.to_numpy())

```

# 2장 인덱스 관리
## 1. 인덱스 변경 
```python

'''

    인덱스(index) 변경
     - DataFrame의 기존컬럼을 index로 변경
     - inplace=True|False 에 따라서 복사여부 결정
     문법:
           df.set_index(기존컬럼, inplace=True|False)

           df.reset_index( drop=False, inplace=True ) # 기존 index를 컬럼으로 변경하고 새로운 index 생성
           df.reset_index( drop=True, inplace=True ) # 기존 index를 삭제하고 새로운 index 생성
'''

df = pd.DataFrame({    "date":['2021','2022'],
                       "City": ["Seoul", "Seoul"],
                       "Temperature": [32, 34]
                       })
print("1. 원본 DataFrame")
print(df)
#
   date   City  Temperature
0  2021  Seoul           32
1  2022  Seoul           34

```

### 1) 기존 컬럼을 인덱스로 변경
```python

df.set_index('date', inplace=True)
print(df)

#
       City  Temperature
date                    
2021  Seoul           32
2022  Seoul           34
```

### 2) 새로운 인덱스로 변경
```python

df.set_index(기존컬럼, inplace = True | False)
drop = T : 기존 인덱스를 삭제하고 새로운 인덱스 생성 
drop = F : 기존 인덱스를 컬럼으로 변경하고 새로운 인덱스 생성
(drop과 inplace의 파라미터 위치는 상관 없음)

df.reset_index(drop=False, inplace=True)         # 기존 인덱스를 컬럼으로 변경하고 새로운 인덱스 생성
print(df)
#
   index  date   City  Temperature
0      0  2021  Seoul           32
1      1  2022  Seoul           34


df.reset_index(drop=True, inplace=True)            # 기존 인덱스를 삭제하고 새로운 인덱스 생성
print(df)
#
   date   City  Temperature
0  2021  Seoul           32
1  2022  Seoul           34


```

### 3) index 재배치
```python
(1) df.reindex(index=값) : 기존 인덱스 재배치

df = pd.DataFrame({ "date":['2021','2022','2012','2023','2024'],
                    "City": ["Seoul", "Seoul", "Seoul","Seoul","Seoul"],
                    "Temperature": [32, 34,32, 34,53]
                  },index=list('AECBD'))
print(df)
#
   date   City  Temperature
A  2021  Seoul           32
E  2022  Seoul           34
C  2012  Seoul           32
B  2023  Seoul           34
D  2024  Seoul           53


new_df = df.reindex(index=list("ABCDE")) #inplace 없어서 복사본을 만들어줘야 함 
print(new_df)
#
   date   City  Temperature
A  2021  Seoul           32
B  2023  Seoul           34
C  2012  Seoul           32
D  2024  Seoul           53
E  2022  Seoul           34

```


### 4) df병합시 기존 index값이 중복발생 ==> ignore_index=True 로 index값을 재설정
> df와 df2 연결시 인덱스도 연결되서 중복됨.
> index로 색인해야 하기 때문에 중복되면 안되기 때문에 ignore_index로 중복문제를 해결해야 함 
> 자동으로 인덱스 생성

```python
df1 = pd.DataFrame({'a':[12,2]},
                   index=[1,2])
df2 = pd.DataFrame({'a':[120,20]},
                   index=[1,2])

new_df = pd.concat([df1, df2])
print(new_df)
# 인덱스가 중복됨 
     a
1   12
2    2
1  120
2   20

new_df = pd.concat([df1, df2], ignore_index=True)
print(new_df)
# 인덱스 중복현상 해결
     a
0   12
1    2
2  120
3   20

```
# 3장. 조회(색인)


```
 행과 컬럼은 label과 Integer location으로 참조할 수 있다.
   다음과 같은 3가지 방법으로 참조한다.
   
   가.  [] : 인덱싱 연산자, 컬럼(들)을 선택하는 목적
           예> [컬럼] ==> Series 반환 ( index와 값 으로 구성됨 )
              [[컬럼,컬럼]] ==> DataFrame 반환
              
   나.  .loc :  label만을 사용한다. ( 기본적으로 index의 label로 인식 )
               label은 single, list, slice 형태 모두 가능하다.
               행과 열을 동시에 조회할 수 있다. df.loc[행,열]
               행과 컬럼 모두 label 만 사용 가능하다.
               
   다.  .iloc :   loc와 유사하지만 정수위치값만을 사용한다.
                  행과 컬럼 모두 위치값 만 사용 가능하다.
```


## 1. 컬럼 조회
```python
    DataFrame 의 컬럼(들) 조회 ==> SQL의  projection 기능

* 컬럼 선택 
   가.  [] : 인덱싱 연산자, 컬럼(들)을 선택하는 목적
      예> [컬럼] ==> Series 반환 ( index와 값 으로 구성됨 )
          [[컬럼,컬럼]] ==> DataFrame 반환

    1. 단일컬럼 조회 ==> Series 반환
      1) df.컬럼명
      2) df['컬럼명']

    2. 멀티컬럼 조회 ==> DataFrame 반환
      1) df[['컬럼명','컬럼명2',...]]
```

### 1) 싱글 및 멀티 컬럼 조회
```python
df = pd.DataFrame({"col1" : [4 ,5, 6, 6],
                   "col2" : [7, 8, 9, 9],
                   "col3" : [10, 11, 12, 12]},
                   index = list("ABCD"))

print("1. col1 컬럼만 조회")
print(df.col1 )     # 도트 이용, Series 반환
#
A    4
B    5
C    6
D    6
Name: col1, dtype: int64


print("2. col1 컬럼만 조회")
print(df['col1'])  # 대괄호 이용, Series 반환
#
A    4
B    5
C    6
D    6
Name: col1, dtype: int64


print("3. col1와 col2 컬럼 조회")
print(df[['col2', 'col1']])  # fancy 색인 비슷 , # DataFrame 반환
#
   col2  col1
A     7     4
B     8     5
C     9     6
D     9     6


print("4. col1 컬럼만 여러번 조회")
print(df[['col1','col1','col1']])  # DataFrame 반환
#
   col1  col1  col1
A     4     4     4
B     5     5     5
C     6     6     6
D     6     6     6
```


### 2) 행 조회
```python
   DataFrame 의 행(들) 조회 ==> SQL의  selection 기능

    1. 행 인덱스의 label 이용 
      - df.loc[label]                ==> 인덱싱 label, Series 반환
      - df.loc[[label,label2,....]]  ==> fancy label, DataFrame 반환
      - df.loc[lable:label2]          ==> slicing label, DataFrame 반환  
      - df.loc[[True,False,..]]      ==> boolean 색인 
      
    2. 행 인덱스의 위치 이용
      - df.iloc[위치]                  ==> 인덱싱 위치, Series 반환
      - df.iloc[[위치,위치1,...]]       ==> fancy 위치, DataFrame 반환
      - df.iloc[위치:위치2]             ==> slicing 위치, DataFrame 반환
      - df.iloc[[True,False,..]]      ==> boolean 색인  


df = pd.DataFrame({"col1" : [4 ,5, 6, 6,1],
                   "col2" : [7, 8, 9, 9,2],
                   "col3" : [10, 11, 12, 12,10]},
                   index = list("ABCDE"))
print(df)
## df.loc 
print("1. A 행 출력(인덱싱 label)")
print(df.loc["A"]) # Series 반환
print("2. A 와 B행 출력(fancy label)")
print(df.loc[["A","B"]]) # DataFrame 반환
print("3. B행부터 D행까지 출력(slicing label)")
print(df.loc["B":"D"]) # DataFrame 반환
print("4. A,C,E행 출력(boolean label)")
print(df.loc[[True,False,True,False,True]]) # DataFrame 반환

## df.iloc 
print("1. A 행 출력(인덱싱 위치)")
print(df.iloc[0]) # Series 반환
print("2. A 와 B행 출력(fancy 위치)")
print(df.iloc[[0,1]]) # DataFrame 반환
print("3. B행부터 D행까지 출력(slicing label)")
print(df.iloc[1:-1]) # DataFrame 반환
print("4. A,C,E행 출력(boolean label)")
print(df.iloc[[True,False,True,False,True]]) # DataFrame 반환


## 조회후 값 변경
df = pd.DataFrame({"col1" : [4 ,5, 6, 6,1],
                   "col2" : [7, 8, 9, 9,2],
                   "col3" : [10, 11, 12, 12,10]},
                   index = list("ABCDE"))
print(df)
```

# 4장. 컬럼 추가 및 삽입
